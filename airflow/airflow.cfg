[core]
executor = KubernetesExecutor
load_examples = False

[database]
sql_alchemy_conn = postgresql+psycopg2://airflowuser:{{ Variable.get('PostgresPassword', deserialize_json=False) }}@postgres-mlops-anubh.postgres.database.azure.com:5432/airflow

[secrets]
backend = airflow.providers.microsoft.azure.secrets.key_vault.AzureKeyVaultBackend
backend_kwargs = {"vault_url": "https://mlops-keyvault-anubh.vault.azure.net/", "credential_type": "managed_identity"}

[logging]
remote_logging = True
remote_base_log_folder = wasbs://logs@mlopsadlsvs5tyf.blob.core.windows.net
remote_log_conn_id = azure_default

[kubernetes_executor]
namespace = airflow
airflow_service_account = airflow-sa
worker_container_image = mlopsacrvs5tyf.azurecr.io/airflow:latest
pod_template_file = /opt/airflow/pod_template.yaml

[webserver]
web_server_host = 0.0.0.0
web_server_port = 8080


AIRFLOW__LOGGING__BASE_LOG_FOLDER: /tmp/airflow/logs
AIRFLOW__LOGGING__REMOTE_LOGGING: False